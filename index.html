<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>

<body>
  <canvas id=c width=320 height=240></canvas>
</body>

<script>
  function drawBinary(binaryImage) {
    const pixels = new Uint8ClampedArray(binaryImage);
    var canvas = document.getElementById('c');
    // create ImageData instance
    var iData = new ImageData(pixels, 320, 240);
    var ctx = c.getContext("2d");
    ctx.putImageData(iData, 0, 0);
  }

  document.onclick = function () {
    const fs = require('./native')
    console.log('-----------------------------');

    console.time("MyTimer");
    console.timeLog("MyTimer", "Getting mmio data (4 * width * height, rgba)");
    // Perhaps some code runs to bootstrap a complex app
    const x = fs.hello();
    console.timeLog("MyTimer", "Drawing on canvas");
    drawBinary(x);
    // ...
    console.timeLog("MyTimer", "Drawn");
    console.timeEnd("MyTimer");
  }
</script>

</html>